(self.AMP=self.AMP||[]).push({n:"amp-instagram",v:"1490899213109",f:(function(AMP){var e;function n(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var f in b)if(Object.defineProperties){var l=Object.getOwnPropertyDescriptor(b,f);l&&Object.defineProperty(a,f,l)}else a[f]=b[f]};var p=Object.prototype.toString;Date.now();self.log=self.log||{user:null,dev:null};var q=self.log;var r,t="Webkit webkit Moz moz ms O o".split(" ");function u(a,b){for(var c in b){var f=a,l=b[c],d;d=f.style;var h=c;r||(r=Object.create(null));var k=r[h];if(!k){k=h;if(void 0===d[h]){var g;g=h;g=g.charAt(0).toUpperCase()+g.slice(1);a:{for(var m=0;m<t.length;m++){var v=t[m]+g;if(void 0!==d[v]){g=v;break a}}g=""}void 0!==d[g]&&(k=g)}r[h]=k}(d=k)&&(f.style[d]=l)}};function w(a,b){function c(a){try{return h.call(l,a)}catch(m){throw self.reportError(m),m;}}var f,l=this,d=a,h=b,k=f||!1;d.addEventListener("message",c,k);return function(){d&&d.removeEventListener("message",c,k);c=d=h=null}};function x(a){var b;try{return JSON.parse(a)}catch(c){b&&b(c)}};function y(a){AMP.BaseElement.call(this,a);this.g=this.a=null;this.b="";this.c=null;this.f=""}n(y,AMP.BaseElement);e=y.prototype;e.preconnectCallback=function(a){this.preconnect.url("https://www.instagram.com",a);this.preconnect.url("https://instagram.fsnc1-1.fna.fbcdn.net",a)};e.renderOutsideViewport=function(){return!1};
e.buildCallback=function(){var a;if(q.user)a=q.user;else throw Error("failed to call initLogConstructor");this.b=a.assert(this.element.getAttribute("data-shortcode")||this.element.getAttribute("shortcode"),"The data-shortcode attribute is required for <amp-instagram> %s",this.element);this.f=this.element.hasAttribute("data-captioned")?"captioned/":""};
e.createPlaceholderCallback=function(){var a=this.win.document.createElement("div");a.setAttribute("placeholder","");var b=this.win.document.createElement("amp-img");b.setAttribute("noprerender","");b.setAttribute("src","https://www.instagram.com/p/"+encodeURIComponent(this.b)+"/media/?size=l");b.setAttribute("layout","fill");b.setAttribute("referrerpolicy","origin");this.propagateAttributes(["alt"],b);this.element.hasAttribute("data-default-framing")&&this.element.classList.add("amp-instagram-default-framing");
u(b,{top:"64px",bottom:"0px",left:"0px",right:"0px"});a.appendChild(b);return a};e.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a};
e.layoutCallback=function(){var a=this,b=this.element.ownerDocument.createElement("iframe");this.a=b;this.c=w(this.win,this.h.bind(this));b.setAttribute("scrolling","no");b.setAttribute("frameborder","0");b.setAttribute("allowtransparency","true");b.setAttribute("title","Instagram: "+this.element.getAttribute("alt"));b.src="https://www.instagram.com/p/"+encodeURIComponent(this.b)+"/embed/"+this.f+"?cr=1&v=7";this.applyFillContent(b);this.element.appendChild(b);u(b,{opacity:0});return this.g=this.loadPromise(b).then(function(){a.getVsync().mutate(function(){u(b,
{opacity:1})})})};e.h=function(a){var b=this;if("https://www.instagram.com"==a.origin&&a.source==this.a.contentWindow&&a.data&&("[object Object]"===p.call(a.data)||0==a.data.indexOf("{"))&&(a="[object Object]"===p.call(a.data)?a.data:x(a.data),void 0!==a&&"MEASURE"==a.type&&a.details)){var c=a.details.height;this.getVsync().measure(function(){b.a.offsetHeight!==c&&b.attemptChangeHeight(c-64).catch(function(){})})}};e.unlayoutOnPause=function(){return!0};
e.unlayoutCallback=function(){if(this.a){var a=this.a;a.parentElement&&a.parentElement.removeChild(a);this.g=this.a=null}this.c&&this.c();return!0};AMP.registerElement("amp-instagram",y,"amp-instagram.amp-instagram-default-framing{border:1px solid #dbdbdb!important}\n/*# sourceURL=/extensions/amp-instagram/0.1/amp-instagram.css*/");
})});
//# sourceMappingURL=amp-instagram-0.1.js.map

